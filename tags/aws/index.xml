<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AWS on small land</title><link>https://uh-zz.github.io/tags/aws/</link><description>Recent content in AWS on small land</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Fri, 05 Jun 2020 18:07:06 +0900</lastBuildDate><atom:link href="https://uh-zz.github.io/tags/aws/index.xml" rel="self" type="application/rss+xml"/><item><title>DynamoDB のソートキーだけで絞り込みたいとき</title><link>https://uh-zz.github.io/posts/category/aws/2020/06/dynamo-only-sortkey-without-partionkey/</link><pubDate>Fri, 05 Jun 2020 18:07:06 +0900</pubDate><guid>https://uh-zz.github.io/posts/category/aws/2020/06/dynamo-only-sortkey-without-partionkey/</guid><description>&lt;h2 id="はじめに"&gt;はじめに&lt;/h2&gt;
&lt;p&gt;Dynamo のテーブルに GSI(グローバルセカンダリインデックス)を貼ってハッシュキー＋ソートキーでクエリするパターンが通常の使い方かと思います。&lt;/p&gt;
&lt;p&gt;ではソートキーを日付にしていた場合、同じ日付範囲のデータを一括で取得できる方法はありますでしょうか？&lt;/p&gt;
&lt;p&gt;公式ドキュメントにはその辺の Tips なかったのですが、同僚から以下の記事を教えてもらいました。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.ketancho.net/entry/2018/01/30/075500#%E8%A8%AD%E8%A8%88%EF%BC%92%E3%83%80%E3%83%9F%E3%83%BC%E5%88%97%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%82%BB%E3%82%AB%E3%83%B3%E3%83%80%E3%83%AA%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E8%B2%BC%E3%82%8B%E6%A1%88" target="_blank" rel="noopener"&gt;DynamoDB の設計力をあげたい&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;これの設計２を参考にしました。&lt;/p&gt;
&lt;p&gt;全データ共通のダミー列を用意して、以下の GSI を作成します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;パーティションキーはダミー列&lt;/li&gt;
&lt;li&gt;ソートキーに日付&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;これで同じ日付範囲の複数データを引っ張ってくることが可能になります。&lt;/p&gt;
&lt;p&gt;確かに美しいと言えないかもしれませんが、機転の効いた方法だと思いました。&lt;/p&gt;</description></item></channel></rss>